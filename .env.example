# =============================================================================
# Kanban Platform - Environment Configuration
# =============================================================================
# Copy this file to .env and configure the values for your environment
#
# QUICK START:
#   Development: cp .env.example .env && ./start.sh
#   Production:  Configure values below, then: CERT_MODE=production ./start.sh
#
# AZURE KEY VAULT (Recommended for Production):
#   1. Run: ./scripts/setup-azure-keyvault.sh
#   2. Copy the output values to this file
#   3. Secrets are loaded automatically from Key Vault
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Development: PORT=4443, CERT_MODE=development, DOMAIN=localhost
# Production:  PORT=443,  CERT_MODE=production,  DOMAIN=your-domain.com

PORT=443
CERT_MODE=production       # development | production
DOMAIN=kanban.your-domain.com
HOST_IP=127.0.0.1
HOST_PROJECT_PATH=/path/to/kanban

# -----------------------------------------------------------------------------
# Azure Key Vault (Recommended for Production)
# -----------------------------------------------------------------------------
# When configured, these secrets are loaded from Key Vault:
#   - portal-secret-key
#   - cross-domain-secret
#   - entra-client-id, entra-client-secret, entra-tenant-id
#   - entra-authority, entra-scopes (for Entra External ID)
#   - certbot-email
#   - redis-url

AZURE_KEY_VAULT_URL=https://your-keyvault.vault.azure.net/
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
AZURE_TENANT_ID=

# -----------------------------------------------------------------------------
# Microsoft Entra External ID (Authentication with email/password)
# -----------------------------------------------------------------------------
# Using Entra External ID (CIAM) for user authentication:
#   1. Create an External ID tenant in Azure Portal
#   2. Register an application in the External ID tenant
#   3. Configure user flows for sign-up/sign-in with email/password
#   4. Set redirect URI: https://your-domain.com/api/auth/callback
#   5. Create a client secret under Certificates & secrets
#
# For regular Entra ID (organizational accounts only):
#   - Use ENTRA_TENANT_ID instead of ENTRA_AUTHORITY
#   - Set ENTRA_SCOPES=openid profile email

ENTRA_CLIENT_ID=
ENTRA_CLIENT_SECRET=
ENTRA_TENANT_ID=

# For Entra External ID (CIAM) - allows email/password sign-up:
ENTRA_AUTHORITY=https://your-tenant.ciamlogin.com/your-tenant-id
ENTRA_SCOPES=User.Read email

# -----------------------------------------------------------------------------
# Let's Encrypt Certificates (Production)
# -----------------------------------------------------------------------------
# Email receives certificate expiration notices

CERTBOT_EMAIL=admin@yourdomain.com
LETSENCRYPT_STAGING=false  # Set to 'true' for testing (issues untrusted certs)

# -----------------------------------------------------------------------------
# Security Secrets
# -----------------------------------------------------------------------------
# IMPORTANT: Generate secure values for production!
#   openssl rand -base64 32
#
# If using Key Vault, these are loaded automatically (leave empty)

PORTAL_SECRET_KEY=change-me-in-production
CROSS_DOMAIN_SECRET=change-me-in-production

# -----------------------------------------------------------------------------
# Internal Services (auto-configured in Docker)
# -----------------------------------------------------------------------------
REDIS_URL=redis://redis:6379

# -----------------------------------------------------------------------------
# Optional: Social Provider API Keys (for link previews)
# -----------------------------------------------------------------------------
# Store in Key Vault for production
# TWITTER_BEARER_TOKEN=
# GITHUB_ACCESS_TOKEN=
# YOUTUBE_API_KEY=
